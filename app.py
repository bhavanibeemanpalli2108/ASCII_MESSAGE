import streamlit as st
import io
import sys

# ================= LETTER PATTERNS (Aâ€“Z) =================

LETTERS = {
    "A": [
        "   *   ",
        "  * *  ",
        " *   * ",
        "*     *",
        "* * * *",
        "*     *",
        "*     *",
    ],
    "B": [
        "****** ",
        "*     *",
        "*     *",
        "****** ",
        "*     *",
        "*     *",
        "****** ",
    ],
    "C": [
        " ***** ",
        "*      ",
        "*      ",
        "*      ",
        "*      ",
        "*      ",
        " ***** ",
    ],
    "D": [
        "****** ",
        "*     *",
        "*     *",
        "*     *",
        "*     *",
        "*     *",
        "****** ",
    ],
    "E": [
        "*******",
        "*      ",
        "*      ",
        "*****  ",
        "*      ",
        "*      ",
        "*******",
    ],
    "F": [
        "*******",
        "*      ",
        "*      ",
        "*****  ",
        "*      ",
        "*      ",
        "*      ",
    ],
    "G": [
        " ***** ",
        "*      ",
        "*      ",
        "*  ****",
        "*     *",
        "*     *",
        " ***** ",
    ],
    "H": [
        "*     *",
        "*     *",
        "*     *",
        "*******",
        "*     *",
        "*     *",
        "*     *",
    ],
    "I": [
        "*******",
        "   *   ",
        "   *   ",
        "   *   ",
        "   *   ",
        "   *   ",
        "*******",
    ],
    "J": [
        "*******",
        "     * ",
        "     * ",
        "     * ",
        "*    * ",
        "*    * ",
        " ****  ",
    ],
    "K": [
        "*    * ",
        "*   *  ",
        "*  *   ",
        "* *    ",
        "*  *   ",
        "*   *  ",
        "*    * ",
    ],
    "L": [
        "*      ",
        "*      ",
        "*      ",
        "*      ",
        "*      ",
        "*      ",
        "*******",
    ],
    "M": [
        "*     *",
        "**   **",
        "* * * *",
        "*  *  *",
        "*     *",
        "*     *",
        "*     *",
    ],
    "N": [
        "*     *",
        "**    *",
        "* *   *",
        "*  *  *",
        "*   * *",
        "*    **",
        "*     *",
    ],
    "O": [
        " ***** ",
        "*     *",
        "*     *",
        "*     *",
        "*     *",
        "*     *",
        " ***** ",
    ],
    "P": [
        "*******",
        "*     *",
        "*     *",
        "*******",
        "*      ",
        "*      ",
        "*      ",
    ],
    "Q": [
        " ***** ",
        "*     *",
        "*     *",
        "*     *",
        "*   * *",
        "*    * ",
        " **** *",
    ],
    "R": [
        "*******",
        "*     *",
        "*     *",
        "****** ",
        "*   *  ",
        "*    * ",
        "*     *",
    ],
    "S": [
        "*******",
        "*      ",
        "*      ",
        "*******",
        "      *",
        "      *",
        "*******",
    ],
    "T": [
        "*******",
        "   *   ",
        "   *   ",
        "   *   ",
        "   *   ",
        "   *   ",
        "   *   ",
    ],
    "U": [
        "*     *",
        "*     *",
        "*     *",
        "*     *",
        "*     *",
        "*     *",
        " ***** ",
    ],
    "V": [
        "*     *",
        "*     *",
        "*     *",
        "*     *",
        " *   * ",
        "  * *  ",
        "   *   ",
    ],
    "W": [
        "*     *",
        "*     *",
        "*     *",
        "*  *  *",
        "* * * *",
        "**   **",
        "*     *",
    ],
    "X": [
        "*     *",
        " *   * ",
        "  * *  ",
        "   *   ",
        "  * *  ",
        " *   * ",
        "*     *",
    ],
    "Y": [
        "*     *",
        " *   * ",
        "  * *  ",
        "   *   ",
        "   *   ",
        "   *   ",
        "   *   ",
    ],
    "Z": [
        "*******",
        "     * ",
        "    *  ",
        "   *   ",
        "  *    ",
        " *     ",
        "*******",
    ],
    " ": [
        "       ",
        "       ",
        "       ",
        "       ",
        "       ",
        "       ",
        "       ",
    ],
}

# ================= DISPLAY FUNCTION (UNCHANGED LOGIC) =================

def display_message(text):
    text = text.upper()
    HEIGHT = 7
    WIDTH = 7
    GAP = " "

    patterns = []
    for ch in text:
        if ch in LETTERS:
            patterns.append(LETTERS[ch])
        else:
            print(f"Unsupported character: {ch}")
            return

    for i in range(HEIGHT):
        row = ""
        for p in patterns:
            row += p[i].ljust(WIDTH) + GAP
        print(row.rstrip())

# ================= STREAMLIT APP =================

st.set_page_config(page_title="ASCII Message", layout="centered")

st.title("ðŸŽ‰ Love You chitti")

# ðŸ”— Read message from URL
params = st.experimental_get_query_params()
message = params.get("msg", [""])[0]

if not message:
    st.warning("No message found in the link.")
else:
    buffer = io.StringIO()
    sys.stdout = buffer
    display_message(message)
    sys.stdout = sys.__stdout__

    st.code(buffer.getvalue())
